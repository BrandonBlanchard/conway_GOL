(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,i){},21:function(t,e,i){},23:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i.n(n),s=i(8),h=i.n(s),o=(i(14),i(1)),l=i(2),r=i(5),u=i(3),c=i(4),d=i(6),f=function(t){function e(t){var i;return Object(o.a)(this,e),(i=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={type:t.type,weight:t.weight||0,isPath:t.isPath||!1},i}return Object(c.a)(e,t),Object(l.a)(e,[{key:"getTypeClass",value:function(){switch(this.state.type){case"wall":return"tile--wall";case"start":return"tile--start";case"end":return"tile--end";default:return"tile--open"}}},{key:"getWeightClass",value:function(){return this.state.weight<1?"weight--0":"weight--"+Math.floor(this.state.weight/355*100)}},{key:"getPathClass",value:function(){return this.state.isPath?" path":""}},{key:"render",value:function(){return a.a.createElement("div",{className:this.getTypeClass()+" "+this.getWeightClass()+this.getPathClass()})}}]),e}(a.a.Component),p=(i(16),function(){function t(e){Object(o.a)(this,t),this.field=[],this.potentials=[],this.updateWeightsCB=e,this.startLocation={x:null,y:null,tile:null},this.endLocation={x:null,y:null,tile:null},this.foundEnd=!1,this.path=[]}return Object(l.a)(t,[{key:"Reset",value:function(){this.potentials=[],this.startLocation={x:null,y:null,tile:null},this.endLocation={x:null,y:null,tile:null},this.foundEnd=!1,this.path=[]}},{key:"UpdateField",value:function(t){this.field=t,this.Reset()}},{key:"FindRoute",value:function(){this.potentials=[],this.findStartEnd(),this.floodNode(this.startLocation.x,this.startLocation.y)}},{key:"inRange",value:function(t,e){return t>=0&&e>=0&&t<this.field[0].length&&e<this.field.length}},{key:"findStartEnd",value:function(){for(var t=this.field[0].length,e=this.field.length,i=0;i<t;i+=1)for(var n=0;n<e;n+=1)"start"===this.field[i][n].type&&(this.startLocation.x=i,this.startLocation.y=n,this.startLocation.tile=this.field[i][n],this.potentials.push({x:i,y:n,tile:this.field[i][n]})),"end"===this.field[i][n].type&&(this.endLocation.x=i,this.endLocation.y=n,this.endLocation.tile=this.field[i][n])}},{key:"floodFromNextNode",value:function(){if(!this.foundEnd&&!(this.potentials.length<1)){var t=this.potentials.shift();this.floodNode(t.x,t.y),this.updateWeightsCB(this.field)}}},{key:"floodNode",value:function(t,e){var i=this,n=this.field[t][e],a=t,s=e-1;this.nodeIsPotential(a,s)&&(this.processHeuristicWeight(a,s,n.weight),this.potentials.push({x:a,y:s,tile:n})),a=t+1,s=e,this.nodeIsPotential(a,s)&&(this.processHeuristicWeight(a,s,n.weight),this.potentials.push({x:a,y:s,tile:n})),a=t,s=e+1,this.nodeIsPotential(a,s)&&(this.processHeuristicWeight(a,s,n.weight),this.potentials.push({x:a,y:s,tile:n})),a=t-1,s=e,this.nodeIsPotential(a,s)&&(this.processHeuristicWeight(a,s,n.weight),this.potentials.push({x:a,y:s,tile:n})),setTimeout(function(){i.floodFromNextNode()},0)}},{key:"processHeuristicWeight",value:function(t,e,i){this.field[t][e].weight=i+5}},{key:"nodeIsPotential",value:function(t,e){if(!this.inRange(t,e)||this.foundEnd)return!1;var i=this.field[t][e];return"start"!==i.type&&("end"===i.type?(this.foundEnd=!0,this.potentials=[],setTimeout(this.traceBack.bind(this),0),!1):"wall"!==i.type&&!(i.weight>0))}},{key:"traceBack",value:function(){var t=this.endLocation;this.traceNext(t.x,t.y)}},{key:"traceNext",value:function(t,e){this.getLowestTravelCostNeighbor(t,e)}},{key:"getLowestTravelCostNeighbor",value:function(t,e){for(var i=this,n=[[t,e-1],[t+1,e],[t,e+1],[t-1,e]],a={tile:{weight:2e3}},s=0;s<4;s+=1){var h={x:n[s][0],y:n[s][1]};if(this.inRange(h.x,h.y)){var o=this.field[h.x][h.y];if("start"===o.type)return;if("end"===o.type||"wall"===o.type||0===o.weight)continue;o.weight<a.tile.weight&&(a={x:h.x,y:h.y,tile:this.field[h.x][h.y]})}}console.log("I picked",a.tile.weight,a.tile.type),a.tile.isPath=!0,this.updateWeightsCB(this.field),setTimeout(function(){i.traceNext(a.x,a.y)},0)}}]),t}()),g=function(t){function e(t){var i;return Object(o.a)(this,e),(i=Object(r.a)(this,Object(u.a)(e).call(this,t))).routeFinder=new p(i.updateWeights.bind(Object(d.a)(Object(d.a)(i)))),i.init=!1,i.state={width:t.width||32,height:t.height||32,field:[]},i}return Object(c.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.init||(this.generateGrid(),this.init=!0)}},{key:"generateGrid",value:function(){for(var t=this.state,e=[],i=0;i<this.state.height;i+=1){e.push([]);for(var n=0;n<this.state.width;n+=1){var a=0,s=this.getRandomType(i,n);"wall"===s&&(a=0),e[i].push({weight:a,type:s,isPath:!1})}}this.placeStartEnd(e),this.routeFinder.UpdateField(e),t.field=e,this.setState(t)}},{key:"placeStartEnd",value:function(t){var e=Math.floor(Math.random()*this.state.width),i=Math.floor(Math.random()*this.state.height);t[e][i]={type:"start",weight:0},this.clearSpaceAroundPoint(t,e,i),e=Math.abs(e-31),i=Math.abs(i-31),t[e][i]={type:"end",weight:0},this.clearSpaceAroundPoint(t,e,i)}},{key:"clearSpaceAroundPoint",value:function(t,e,i){var n=this;[[e-1,i-1],[e,i-1],[e+1,i-1],[e-1,i],[e+1,i],[e-1,i+1],[e,i+1],[e+1,i+1]].map(function(e){n.inRange(e[0],e[1])&&(t[e[0]][e[1]]={type:"open",weight:0})})}},{key:"inRange",value:function(t,e){return t>0&&e>0&&t<this.state.width&&e<this.state.height}},{key:"getRandomType",value:function(){return 20*Math.random()+1>15?"wall":"open"}},{key:"getRandomWeight",value:function(){return 1+255*Math.random()}},{key:"updateWeights",value:function(t){var e=this.state;e.field=t,this.setState(e)}},{key:"render",value:function(){return a.a.createElement("div",{className:"grid",style:{width:10*this.state.width+"px"}},this.state.field.map(function(t,e){return t.map(function(t,i){return a.a.createElement(f,{key:e+i+t.type+t.weight+t.isPath,type:t.type,weight:t.weight,isPath:t.isPath})})}),a.a.createElement("div",{className:"controls"},a.a.createElement("button",{onClick:this.generateGrid.bind(this)}," Regen "),a.a.createElement("button",{onClick:this.routeFinder.FindRoute.bind(this.routeFinder)}," Start ")))}}]),e}(a.a.Component),y=(i(21),function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"app"},a.a.createElement(g,null))}}]),e}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,i){t.exports=i(23)}},[[9,2,1]]]);
//# sourceMappingURL=main.c807eb94.chunk.js.map